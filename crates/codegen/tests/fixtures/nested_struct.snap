---
source: crates/codegen/tests/yul.rs
expression: output
input_file: tests/fixtures/nested_struct.fe
---
object "NestedStruct" {
  code {
    function init() {
      let v0 := 0
      let v1 := datasize("NestedStruct_deployed")
      let v2 := dataoffset("NestedStruct_deployed")
      codecopy(0, v2, v1)
      return(0, v1)
    }
    init()
  }

  object "NestedStruct_deployed" {
    code {
      function abi_encode(value, ops) {
        mstore(0, value)
        return(0, 32)
      }
      function mem_read(value) -> ret {
        let v0 := mload(0x40)
        if iszero(v0) {
          v0 := 0x80
        }
        mstore(0x40, add(v0, 32))
        mstore(v0, 0)
        let v1 := mload(0x40)
        if iszero(v1) {
          v1 := 0x80
        }
        mstore(0x40, add(v1, 32))
        let v2 := v0
        mstore(v1, mload(v2))
        let v3 := v1
        mstore(v3, value)
        let v4 := mload(v3)
        ret := v4
        leave
      }
      function read_inner(outer) -> ret {
        let v0 := sload(outer)
        ret := v0
        leave
      }
      function runtime() {
        let v0 := 0
        let v1 := stor_ptr__Evm_Outer__31089a952466fa6f(v0, 0)
        let v2 := v1
        let v3 := calldataload(0)
        let v4 := shr(224, v3)
        switch v4
          case 3091856072 {
            let v5 := calldataload(4)
            write_inner(v5, v2)
            abi_encode(v5, 0)
          }
          case 3513050253 {
            let v6 := read_inner(v2)
            abi_encode(v6, 0)
          }
          case 2154770637 {
            let v7 := calldataload(4)
            let v8 := mem_read(v7)
            abi_encode(v8, 0)
          }
          default {
            return(0, 0)
          }
      }
      function stor_ptr__Evm_Outer__31089a952466fa6f(self, slot) -> ret {
        let v0 := slot
        ret := v0
        leave
      }
      function write_inner(value, outer) {
        sstore(outer, value)
        leave
      }
      runtime()
      return(0, 0)
    }
  }
}
